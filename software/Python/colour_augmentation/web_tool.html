<html>
  <head>
    <script>
      function getMaxR(rgb) {
        if (rgb[0] >= 152) {
          return Math.min(255, rgb[0] + 2);
        } else if (rgb[0] >= 99) {
          return rgb[0] + 1;
        } else if (rgb[1] <= 60 && rgb[2] <= 20 || rgb[1] <= 20 && rgb[2] <= 60 || rgb[1] > 20 && rgb[1] <= 60 && rgb[2] > 20 && rgb[2] <= 60 && rgb[1] + rgb[2] <= 80) {
          return rgb[0] + 3;
        } else if (rgb[1] <= 100 && rgb[2] <= 60 || rgb[1] <= 60 && rgb[2] <= 100 || rgb[1] > 60 && rgb[1] <= 100 && rgb[2] > 60 && rgb[2] <= 100 && rgb[1] + rgb[2] <= 160) {
          return Number.parseInt(0.9489795918367347 * rgb[0]) + 7;
        } else if (rgb[1] <= 140 && rgb[2] <= 100 || rgb[1] <= 100 && rgb[2] <= 140 || rgb[1] > 100 && rgb[1] <= 140 && rgb[2] > 100 && rgb[2] <= 140 && rgb[1] + rgb[2] <= 240) {
          return Number.parseInt(0.8877551020408163 * rgb[0]) + 13;
        } else if (rgb[1] <= 180 && rgb[2] <= 140 || rgb[1] <= 140 && rgb[2] <= 180 || rgb[1] > 140 && rgb[1] <= 180 && rgb[2] > 140 && rgb[2] <= 180 && rgb[1] + rgb[2] <= 320) {
          if (rgb[0] < 20) {
            return Number.parseInt(0.65 * rgb[0]) + 17;
          } else if (rgb[0] < 40) {
            return Number.parseInt(0.75 * rgb[0]) + 15;
          } else {
            return Number.parseInt(0.9482758620689655 * rgb[0] + 7.948275862068965);
          }
        } else if (rgb[1] <= 220 && rgb[2] <= 180 || rgb[1] <= 180 && rgb[2] <= 220 || rgb[1] > 180 && rgb[1] <= 220 && rgb[2] > 180 && rgb[2] <= 220 && rgb[1] + rgb[2] <= 400) {
          if (rgb[0] < 20) {
            return Number.parseInt(0.55 * rgb[0]) + 22;
          } else if (rgb[0] < 40) {
            return Number.parseInt(0.75 * rgb[0]) + 18;
          } else {
            return Number.parseInt(0.9137931034482759 * rgb[0] + 11.44827586206896);
          }
        } else if (rgb[1] <= 255 && rgb[2] <= 215 || rgb[1] <= 215 && rgb[2] <= 255 || rgb[1] > 215 && rgb[1] <= 255 && rgb[2] > 215 && rgb[2] <= 255 && rgb[1] + rgb[2] <= 470) {
          if (rgb[0] < 20) {
            return Number.parseInt(0.5 * rgb[0]) + 26;
          } else if (rgb[0] < 40) {
            return Number.parseInt(0.7 * rgb[0]) + 22;
          } else {
            return Number.parseInt(0.896551724137931 * rgb[0] + 14.137931034482762);
          }
        } else {
          if (rgb[0] < 20) {
            return Number.parseInt(0.4 * rgb[0]) + 32;
          } else if (rgb[0] < 40) {
            return Number.parseInt(0.6 * rgb[0]) + 28;
          } else {
            return Number.parseInt(0.8793103448275862 * rgb[0] + 16.827586206896555);
          }
        }
      }

      function computeCols() {
        r = parseInt(document.getElementById("red").value);
        g = parseInt(document.getElementById("green").value);
        b = parseInt(document.getElementById("blue").value);
        maxR = getMaxR([r, g, b]); 
        document.getElementById("maxR").innerHTML = maxR.toString();
        document.getElementById("clrOrg").style.backgroundColor = 'rgb(' + [r,g,b].join(',') + ')'; 
        document.getElementById("clrMod").style.backgroundColor = 'rgb(' + [maxR,g,b].join(',') + ')';
        event.preventDefault();
      }

    </script>
  </head>
  <body>
    <form onsubmit="computeCols(this)">
      <label for="red">Red (0-255):</label><br>
      <input type="text" id="red" name="red" value="0"><br><br>
      <label for="green">Green (0-255):</label><br>
      <input type="text" id="green" name="green" value="0"><br><br>
      <label for="blue">Blue (0-255):</label><br>
      <input type="text" id="blue" name="blue" value="0"><br><br>
      <input id="submit" type="submit">
    </form>
    <br>
    <div>Max R:</div>
    <div id="maxR">0</div><br><br>

    <table style="width:100%;">
      <tr>
        <td>Original Colour</td>
        <td>Modified Colour</td>
      </tr>
      <tr>
        <td id="clrOrg" style="height: 80px; background-color: #000000;"></td>
        <td id="clrMod" style="height: 80px; background-color: #000000;"></td>
      </tr>
    </table>

  </body>
</html>
